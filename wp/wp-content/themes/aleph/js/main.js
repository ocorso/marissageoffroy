/mobile/i.test(navigator.userAgent)&&!location.hash&&setTimeout(function(){if(!pageYOffset){window.scrollTo(0,1)}},1000);jQuery(document).ready(function($){var comment_nav=function(){jQuery("#comment-nav li a").each(function(){var href=jQuery(this).attr("href");if(href!="#"){jQuery(this).attr("data-rel",href);jQuery(this).attr("href","#")}})};var panel_height=function(varH){$(window).bind("resize",function(){$header=$('header[role="banner"]');window_height=$(window).height()-$header.height();$("#portfolioFS").css("height",window_height-varH+$header.height()+10);if($header.hasClass("contact-open")||$header.hasClass("search-open")){$header.css("top",window_height);result_height=$search.height()-$("#search-form-overlay").height()-varH;$("#search_panel #results").css("height",result_height)}})};panel_height(60);var open_sidebar=function(){if(!jQuery('header[role="banner"]').hasClass("contact-open")&&!jQuery('header[role="banner"]').hasClass("search-open")&&!jQuery("#responsiveMenu > li > .sidebar-toggle").hasClass("active")&&!jQuery(".sidebar-toggle.btn").hasClass("active")){var offsetSidebar=jQuery("#footer-sidebar").offset().top;var sidebarHeight=jQuery("#footer-sidebar").height();if(sidebarHeight>360){var transitionLength=400}else{var transitionLength=sidebarHeight+40}transitionLength=(jQuery(window).height()-transitionLength)*100/jQuery(window).height();jQuery("#footer-sidebar").fadeIn(50).animate({top:transitionLength+"%"},250);jQuery("#responsiveMenu > li > .sidebar-toggle").addClass("active");jQuery(".sidebar-toggle.btn").addClass("active")}};var close_sidebar=function(){var sidebarHeight=jQuery("#footer-sidebar").height();var transitionLength=sidebarHeight+40;jQuery("#footer-sidebar").animate({top:"100%"},300);setTimeout(function(){jQuery("#footer-sidebar").hide()},300);jQuery("#responsiveMenu > li > .sidebar-toggle").removeClass("active");jQuery(".sidebar-toggle.btn").removeClass("active")};var header_height=jQuery('header[role="banner"]').height();var init_scripts=function(){if(jQuery.browser.msie){jQuery("a#screenfull").hide()}jQuery(".fancybox").fancybox();jQuery(".fancybox.info-link").fancybox({onStart:function(){jQuery("#portfolio-overlay").css("display","block")},onClosed:function(){jQuery("#portfolio-overlay").css("display","none")}});jQuery(".fancybox.share-link").fancybox({onStart:function(){jQuery("#shareModal").css("display","block")},onClosed:function(){jQuery("#shareModal").css("display","none")}});if(twitter_username!="false"){jQuery(".tweet").tweet({username:twitter_username,join_text:null,avatar_size:28,count:twitter_count,loading_text:"loading tweets..."}).bind("loaded",function(){jQuery(this).find("a").attr("target","_blank");jQuery(".tweet_avatar").append('<p class="gloss"></p>')})}jQuery(".sidebar-toggle:not(.active)").live("click",function(){open_sidebar()});jQuery(".sidebar-toggle.active").live("click",function(){close_sidebar()});jQuery("#pass-submit").live("click",function(){function getBaseURL(){var url=location.href;var baseURL=url.substring(0,url.indexOf("/",14));if(baseURL.indexOf("http://localhost")!=-1){var url=location.href;var pathname=location.pathname;var index1=url.indexOf(pathname);var index2=url.indexOf("/",index1+1);var baseLocalUrl=url.substr(0,index2);return baseLocalUrl+"/"}else{return baseURL+"/"}}var siteUrl=getBaseURL(),post_password=jQuery("#protected-post-form .post_password").val(),dataString="post_password="+post_password+"&Submit=Submit";jQuery.ajax({type:"POST",url:siteUrl+"wp-login.php?action=postpass",data:dataString,success:function(data){var error=jQuery(data).find("#protected-post-form");if(error.length){jQuery("#protected-post-form .error_log").css("display","inline-block").text("Please enter a correct password")}else{var content=jQuery(data).find(".post_content");jQuery(".post_content").html(content);init_scripts()}}});return false});cufon_refresh();jQuery("#tooltip").remove();jQuery("#main-content .nano").nanoScroller({iOSNativeScrolling:true,scroll:"top"});jQuery("a#logo").live("click",function(e){e.preventDefault();jQuery('header[role="banner"] ul.nav').find(".active").removeClass("active")});jQuery('header[role="banner"] ul.nav a:not(.sidebar-toggle)').live("click",function(e){e.preventDefault();jQuery(this).parent().parent().find(".active").removeClass("active");jQuery(this).addClass("active")});jQuery("a.TopPrev, a.TopNext, #pageslide a").live("click",function(e){e.preventDefault();var data_id=jQuery(this).attr("data-id");jQuery("ul.nav").find(".active").removeClass("active");jQuery("ul.nav").find("a[data-id='"+data_id+"']").addClass("active")});jQuery(".template-portfolio .img-container").hover(function(){jQuery(this).find("p").fadeIn(250)},function(){jQuery(this).find("p").fadeOut(100)});jQuery("article.portfolio .blueberry").blueberry({pager:media_pager,interval:media_interval,duration:media_duration,hoverpause:media_hover});var windowW=jQuery(window).width();var blueberry_height=function(windowW){var mbpH,imacH,ipadH,iphoneH,mbpS,imacS,ipadS,iphoneS,mbp=jQuery(".blueberry.macbookpro"),imac=jQuery(".blueberry.imac"),ipad=jQuery(".blueberry.ipad"),iphone=jQuery(".blueberry.iphone");if(windowW){if(windowW>480){jQuery(".blueberry.macbookpro ul.slides").css("height",0.41428571428571*mbp.width());jQuery(".blueberry.imac ul.slides").css("height",0.52417582417582*imac.width());jQuery(".blueberry.ipad ul.slides").css("height",0.60549450549451*ipad.width());jQuery(".blueberry.iphone ul.slides").css("height",0.64725274725275*iphone.width())}else{jQuery(".blueberry.macbookpro ul.slides, .blueberry.imac ul.slides, .blueberry.ipad ul.slides, .blueberry.iphone ul.slides").css("height","auto")}}jQuery(".blueberry.ipad, .blueberry.iphone, .blueberry.imac, .blueberry.macbookpro").css({backgroundSize:"contain"})};blueberry_height(windowW);comment_nav();jQuery(".avatar").append('<p class="gloss"></p>');jQuery(".archive-nav li a").each(function(){var href=jQuery(this).attr("href");if(href!="#"){jQuery(this).attr("data-rel",href);jQuery(this).attr("href","#")}});jQuery("[placeholder]").focus(function(){var input=jQuery(this);if(input.val()==input.attr("placeholder")){input.val("");input.removeClass("placeholder")}}).blur(function(){var input=jQuery(this);if(input.val()==""||input.val()==input.attr("placeholder")){input.addClass("placeholder");input.val(input.attr("placeholder"))}}).blur();jQuery("[placeholder]").parents("form").submit(function(){jQuery(this).find("[placeholder]").each(function(){var input=jQuery(this);if(input.val()==input.attr("placeholder")){input.val("")}})});var targets=jQuery(".ttip"),target=false,tooltip=false,title=false;targets.bind("mouseenter",function(){target=jQuery(this);tip=target.attr("title");tooltip=jQuery('<div id="tooltip"></div>');if(!tip||tip==""){return false}target.removeAttr("title");tooltip.css("opacity",0).html(tip).appendTo("body");var init_tooltip=function(){if(jQuery(window).width()<tooltip.outerWidth()*1.5){tooltip.css("max-width",jQuery(window).width()/2)}else{tooltip.css("max-width",340)}var pos_left=target.offset().left+(target.outerWidth()/2)-(tooltip.outerWidth()/2),pos_top=target.offset().top-tooltip.outerHeight()-20;if(pos_left<0){pos_left=target.offset().left+target.outerWidth()/2-20;tooltip.addClass("left")}else{tooltip.removeClass("left")}if(pos_left+tooltip.outerWidth()>jQuery(window).width()){pos_left=target.offset().left-tooltip.outerWidth()+target.outerWidth()/2+20;tooltip.addClass("right")}else{tooltip.removeClass("right")}if(pos_top<0){var pos_top=target.offset().top+target.outerHeight();tooltip.addClass("top")}else{tooltip.removeClass("top")}tooltip.css({left:pos_left,top:pos_top}).animate({top:"+=10",opacity:1},50)};init_tooltip();jQuery(window).resize(init_tooltip);var remove_tooltip=function(){tooltip.animate({top:"-=10",opacity:0},50,function(){jQuery(this).remove()});target.attr("title",tip)};target.bind("mouseleave",remove_tooltip);tooltip.bind("click",remove_tooltip)});jQuery(".dropdown-toggle").dropdown();var responsive_menu_height=jQuery(".responsiveMenuGroup").height();jQuery(".responsiveMenuGroup").css("margin-top",(header_height-responsive_menu_height)/2);jQuery(window).resize(function(){windowW=jQuery(window).width();blueberry_height(windowW);if(windowW>=980){jQuery.pageslide.close()}cufon_refresh()});jQuery(".home-works.blueberry").blueberry({pager:true,interval:home_works_interval,duration:home_works_duration,hoverpause:home_works_hover});var vimeoPlayers=jQuery(".flexslider").find("iframe.vimeo"),player;for(var i=0,length=vimeoPlayers.length;i<length;i++){player=vimeoPlayers[i];$f(player).addEvent("ready",ready)}function addEvent(element,eventName,callback){if(element.addEventListener){element.addEventListener(eventName,callback,false)}else{element.attachEvent(eventName,callback,false)}}function ready(player_id){var froogaloop=$f(player_id);froogaloop.addEvent("play",function(data){jQuery(".flexslider").flexslider("pause")});froogaloop.addEvent("pause",function(data){jQuery(".flexslider").flexslider("play")})}function callPlayer(frame_id,func,args){if(window.jQuery&&frame_id instanceof jQuery){frame_id=frame_id.get(0).id}var iframe=document.getElementById(frame_id);if(iframe&&iframe.tagName.toUpperCase()!="IFRAME"){iframe=iframe.getElementsByTagName("iframe")[0]}if(!callPlayer.queue){callPlayer.queue={}}var queue=callPlayer.queue[frame_id],domReady=document.readyState=="complete";if(domReady&&!iframe){window.console&&console.log("callPlayer: Frame not found; id="+frame_id);if(queue){clearInterval(queue.poller)}}else{if(func==="listening"){if(iframe&&iframe.contentWindow){func='{"event":"listening","id":'+JSON.stringify(""+frame_id)+"}";iframe.contentWindow.postMessage(func,"*")}}else{if(!domReady||iframe&&(!iframe.contentWindow||queue&&!queue.ready)){if(!queue){queue=callPlayer.queue[frame_id]=[]}queue.push([func,args]);if(!("poller" in queue)){queue.poller=setInterval(function(){callPlayer(frame_id,"listening")},250);messageEvent(1,function runOnceReady(e){var tmp=JSON.parse(e.data);if(tmp&&tmp.id==frame_id&&tmp.event=="onReady"){clearInterval(queue.poller);queue.ready=true;messageEvent(0,runOnceReady);while(tmp=queue.shift()){callPlayer(frame_id,tmp[0],tmp[1])}}},false)}}else{if(iframe&&iframe.contentWindow){if(func.call){return func()}iframe.contentWindow.postMessage(JSON.stringify({event:"command",func:func,args:args||[],id:frame_id}),"*")}}}}function messageEvent(add,listener){var w3=add?window.addEventListener:window.removeEventListener;w3?w3("message",listener,!1):(add?window.attachEvent:window.detachEvent)("onmessage",listener)}}var FS_captionpos=function(element){var position=element.find(".slide-content").attr("class");var dimx=element.find(".slide-content").width();var dimy=element.find(".slide-content").height();if(position.indexOf("topLeft")>=0){posx="left";posy="top"}else{if(position.indexOf("topCenter")>=0){posx="center";posy="top"}else{if(position.indexOf("topRight")>=0){posx="right";posy="top"}else{if(position.indexOf("middleLeft")>=0){posx="left";posy="middle"}else{if(position.indexOf("center")>=0){posx="center";posy="middle"}else{if(position.indexOf("middleRight")>=0){posx="right";posy="middle"}else{if(position.indexOf("bottomLeft")>=0){posx="left";posy="bottom"}else{if(position.indexOf("bottomCenter")>=0){posx="center";posy="bottom"}else{if(position.indexOf("bottomRight")>=0){posx="right";posy="bottom"}else{posx=null;posy=null}}}}}}}}}if(posx=="center"){element.find(".slide-content").css("margin-left",-0.5*dimx)}if(posy=="middle"){element.find(".slide-content").css("margin-top",-0.5*dimy)}};var homeFS_obj=jQuery("#home_slider");if(homeFS_obj.length!==0){homeFS_obj.hide(),homeFS_obj.imagesLoaded(function(){jQuery(document).find("#loading").hide(150),homeFS_obj.show().fitVids().flexslider({animationLoop:homeFS[3],smoothHeight:homeFS[4],startAt:homeFS[5],slideshow:homeFS[6],slideshowSpeed:homeFS[7],animationSpeed:homeFS[8],initDelay:homeFS[9],randomize:homeFS[10],pauseOnAction:true,pauseOnHover:homeFS[11],useCSS:false,video:true,directional:homeFS[12],controlNav:homeFS[13],pausePlay:homeFS[14],touch:homeFS[15],mousewheel:homeFS[16],keyboard:homeFS[17],pauseText:'<em class="icon-pause"></em>',playText:'<em class="icon-play"></em>',before:function(slider){var bgsize=slider.slides.eq(slider.currentSlide).find(".slide-media").attr("data-bg-size");slider.slides.eq(slider.currentSlide).find(".slide-media").css({backgroundSize:bgsize});if(slider.slides.eq(slider.currentSlide).find("iframe.vimeo").length!==0){$f(slider.slides.eq(slider.currentSlide).find("iframe.vimeo").attr("id")).api("pause")}if(slider.slides.eq(slider.currentSlide).find("iframe.youtube").length!==0){var yid=slider.slides.eq(slider.currentSlide);yid=yid.find("iframe.youtube").attr("id");callPlayer(yid,function(){callPlayer(yid,"pauseVideo")})}},start:function(slider){slider.slides.each(function(){var bgsize=jQuery(this).find(".slide-media").attr("data-bg-size");jQuery(this).find(".slide-media").css({backgroundSize:bgsize});jQuery(this).find(".slide-content").css("visibility","hidden")});FS_captionpos(slider.slides.eq(slider.currentSlide));jQuery(window).on("debouncedresize",function(e){console.log(jQuery(window).width());if(jQuery(window).width()>480){FS_captionpos(slider.slides.eq(slider.currentSlide))}else{slider.slides.eq(slider.currentSlide).find(".slide-content").css("margin","10px")}});setTimeout(function(){slider.slides.eq(slider.currentSlide).find(".slide-content").css("visibility","visible")},10)},after:function(slider){FS_captionpos(slider.slides.eq(slider.currentSlide));jQuery(window).on("debouncedresize",function(e){console.log(jQuery(window).width());if(jQuery(window).width()>480){FS_captionpos(slider.slides.eq(slider.currentSlide))}else{slider.slides.eq(slider.currentSlide).find(".slide-content").css("margin","10px")}});setTimeout(function(){slider.slides.eq(slider.currentSlide).find(".slide-content").css("visibility","visible")},10)}})})}(function($){$.fn.isotope_layout=function(options){var defaultVal={item:false,filter:false,overlay:false,itemsRow:["1","2","3","4","5","6"],layout:"fitRows"};var obj=$.extend(defaultVal,options);return this.each(function(){var selObject=$(this);function p(){var e=obj.itemsRow[0],t=selObject.width();return t>=480&&t<769?e=obj.itemsRow[1]:t>=769&&t<1023?e=obj.itemsRow[2]:t>=1024&&t<1224?e=obj.itemsRow[3]:t>=1224&&t<1824?e=obj.itemsRow[4]:t>=1824&&(e=obj.itemsRow[5]),e}function d_x(){selObject.width()<769?t=0:t=e;var n=selObject.width()-t,r=p(),i=Math.floor(n/r);obj.item.each(function(){jQuery(this).width(i)})}function v_x(){if(n.length!=0){d_x(),n.isotope("reLayout")}}function overlay_items(){if(obj.overlay==true){obj.item.each(function(){$(this).hoverdir()})}}var e=0,t=e,n=selObject;n.hide(),n.imagesLoaded(function(){d_x(),jQuery(document).find("#loading").hide(150),n.fadeIn(500).isotope({itemSelector:obj.item,resizable:!1,transformsEnabled:!0,layoutMode:obj.layout})});if(obj.filter==true){var c=jQuery("#filter, #portfolio_fields"),h=c.find("a");h.click(function(){jQuery(".child-active").removeClass("child-active");if(jQuery(this).parent().parent().parent().hasClass("dropdown")){jQuery(this).parent().parent().parent().addClass("child-active")}if(jQuery(this).hasClass("active")){return !1}var e=jQuery(this).attr("data-filter");return n.isotope({filter:e}),h.removeClass("active"),jQuery(this).addClass("active"),!1})}jQuery(window).on("debouncedresize",function(e){v_x()}),overlay_items()})}})(jQuery);var grid=new Array("1","2","3","4","5","6");jQuery(".portfolio-masonry").isotope_layout({item:jQuery(".portfolio-masonry .portfolio-masonry-item"),layout:"masonry",itemsRow:grid,overlay:true,filter:true});jQuery(".portfolio-fitrows").isotope_layout({item:jQuery(".portfolio-fitrows .portfolio-fitrows-item"),layout:"fitRows",itemsRow:grid,overlay:true,filter:true});jQuery("#portfolioFS").imagesLoaded(function(){jQuery("#portfolioFS").flexslider({animationLoop:true,smoothHeight:false,pauseOnAction:true,pauseOnHover:true,useCSS:false,video:false,directional:true,controlNav:false,pausePlay:false,touch:true,mousewheel:true,keyboard:true,start:function(slider){if(slider.slides===undefined){jQuery(slider).find(".slide-media").css({backgroundSize:"cover"})}else{slider.slides.each(function(){jQuery(this).find(".slide-media").css({backgroundSize:"cover"})})}}})})};init_scripts();var $header=$('header[role="banner"]'),$mainContent=$("#main-content"),$content=$("#main-content > .nano > .content"),$util=$("#utilities"),$footer=$('footer[role="contentinfo"]'),$topNext=$(".TopNext"),$topNextA=$(".TopNext .arrow"),$topNextD=$(".TopNext .desc"),$topPrev=$(".TopPrev"),$topPrevA=$(".TopPrev .arrow"),$topPrevD=$(".TopPrev .desc"),$topSM=$(".TopSubMenu"),$topSMA=$(".sub-arrow"),$subC=$(".SubClose"),$subPostA=$(".SubPostAdj"),$subPageA=$(".SubPageAdj"),$contact=$("#contact_panel"),$search=$("#search_panel"),$contactB=$("header[role='banner'] #contact"),$searchB=$("header[role='banner'] #search");var initVar=function(){$header=$('header[role="banner"]');$mainContent=$("#main-content");$content=$("#main-content > .nano > .content");$util=$("#utilities");$footer=$('footer[role="contentinfo"]');$topNext=$(".TopNext");$topNextA=$(".TopNext .arrow");$topNextD=$(".TopNext .desc");$topPrev=$(".TopPrev");$topPrevA=$(".TopPrev .arrow");$topPrevD=$(".TopPrev .desc");$topSM=$(".TopSubMenu");$topSMA=$(".sub-arrow");$subC=$(".SubClose");$subPostA=$(".SubPostAdj");$subPageA=$(".SubPageAdj");$contact=$("#contact_panel");$search=$("#search_panel");$contactB=$("header[role='banner'] #contact");$searchB=$("header[role='banner'] #search")};var An="animated ",AnDe="animated delayed ",fadeI="fadeIn ",fadeIUB="fadeInUpBig ",fadeID="fadeInDown ",fadeIDB="fadeInDownBig ",fadeO="fadeOut ",fadeOU="fadeOutUp ",fadeOUB="fadeOutUpBig ",fadeODB="fadeOutDownBig ",bounceIU="bounceInUp ",bounceO="bounceOut ",bounceOU="bounceOutUp ",bounceOD="bounceOutDown ",bounceOR="bounceOutRight ",time;function animation_ie(element,animation){switch(animation){case"fadeI":element.fadeIn(750);break;case"fadeIUB":element.fadeIn(750);break;case"fadeID":element.fadeIn(750);break;case"fadeIDB":element.fadeIn(750);break;case"fadeO":element.fadeOut(750);break;case"fadeOU":element.fadeOut(750);break;case"fadeOUB":element.fadeOut(750);break;case"fadeODB":element.fadeOut(750);break;case"bounceIU":element.fadeIn(750);break;case"bounceO":element.fadeOut(750);break;case"bounceOU":element.fadeOut(750);break;case"bounceOD":element.fadeOut(750);break;case"bounceOR":element.fadeOut(750);break}}var animations=AnDe+fadeI+fadeIUB+fadeID+fadeIDB+fadeO+fadeOU+fadeOUB+fadeODB+bounceIU+bounceO+bounceOU+bounceOD+bounceOR;function deleteAnim(selectors){selectors.removeClass(animations)}function deleteAnimT(selectors,time){setTimeout(function(){selectors.removeClass(animations)},time)}function topLevel(loadOptions){switch(loadOptions.step){case"unload":$topPrevA.stop().animate({left:"-100px"},200);$topPrevD.stop().animate({left:"-300px"},200);$topNextA.stop().animate({right:"-100px"},200);$topNextD.stop().animate({right:"-300px"},200);$topSMA.animate({bottom:"-100px"},200);setTimeout(function(){$topSMA.hide()},200);if(loadOptions.bones&&loadOptions.bones=="false"){if(jQuery.browser.msie){animation_ie($header,"fadeOUB");animation_ie($footer,"fadeODB");animation_ie($mainContent,"fadeO")}else{$header.addClass(An+fadeOUB);$footer.addClass(An+fadeODB);$mainContent.addClass(An+fadeO)}}else{if(jQuery.browser.msie){animation_ie($mainContent,"bounceOR")}else{$mainContent.addClass(An+bounceOR)}}close_sidebar();setTimeout(function(){$util.empty()},750);break;case"load":var selectors=$header.add($mainContent).add($footer);deleteAnim(selectors);$topPrev.add($topNext).add($topSM).add($topSMA).appendTo($util);var widthSM=$(window).width()-$topSM.outerWidth();$topSM.css("margin-left",(widthSM*0.5));$(window).resize(function(){var widthSM=$(window).width()-$topSM.outerWidth();$topSM.css("margin-left",(widthSM*0.5))});if(loadOptions.bones&&loadOptions.bones=="true"){$header.add($footer).show();if(jQuery.browser.msie){animation_ie($header,"fadeIDB");animation_ie($footer,"fadeIUB")}else{$header.addClass(An+fadeIDB);$footer.addClass(An+fadeIUB)}$mainContent.css("bottom","40px")}if(loadOptions.inner&&loadOptions.inner=="true"){$mainContent.removeClass(bounceOR)}if(loadOptions.headerH){$mainContent.css("top",loadOptions.headerH+"px")}if(jQuery.browser.msie){animation_ie($mainContent,"fadeI")}else{$mainContent.addClass(An+fadeI)}$topPrevA.animate({left:"20px"},750);$topNextA.animate({right:"20px"},750);$topSMA.animate({bottom:"60px"},750);var timeoutId1=timeoutId2=timeoutId3=null;var timeoutId1,timeoutId2,timeoutId3;$topPrevA.add($topPrevD).bind({mouseover:function(){clearInterval(timeoutId1);$topPrevD.stop().show(0).animate({left:0},250)},mouseleave:function(){$topPrevD.animate({left:"-300px"},250);timeoutId1=setTimeout(function(){$topPrevD.hide(0)},300)}});$topNextA.add($topNextD).bind({mouseover:function(){clearInterval(timeoutId2);$topNextD.stop().show(0).animate({right:0},250)},mouseleave:function(){$topNextD.animate({right:"-300px"},250);timeoutId2=setTimeout(function(){$topNextD.hide(0)},300)}});$topSMA.add($topSM).bind({mouseover:function(){clearInterval(timeoutId3);$topSM.stop().show(0).animate({bottom:"40px"},250)},mouseleave:function(){$topSM.animate({bottom:"-100px"},250);timeoutId3=setTimeout(function(){$topSM.hide(0)},200)}});if(loadOptions.callback){var selectors=$header.add($mainContent).add($footer);loadOptions.callback(selectors,750)}break}}function subLevel(loadOptions){$header.add($footer).hide();var type,position,animation=fadeIUB,selector;if(loadOptions!="undefined"){type=loadOptions.type;if(type=="post"){selector=$subPostA;position="10"}else{if(type=="page"){selector=$subPageA;position="40"}else{if(type=="none"){selector="";position="10"}}}}switch(loadOptions.step){case"unload":var selectors=$header.add($mainContent).add($footer);deleteAnim(selectors);if(loadOptions.close&&loadOptions.close=="true"){time=750;if(jQuery.browser.msie){animation_ie($mainContent,"bounceOD");animation_ie($subC.add(selector),"fadeODB")}else{animation=An+fadeODB;animationC=An+bounceOD;$mainContent.addClass(animationC);$subC.add(selector).addClass(animation)}}else{time=750;if(jQuery.browser.msie){animation_ie($mainContent,"bounceOU");animation_ie($subC.add(selector),"fadeO")}else{animation=An+fadeO;animationC=An+bounceOU;$mainContent.addClass(animationC);$subC.add(selector).addClass(animation)}}setTimeout(function(){$util.empty()},time);close_sidebar();break;case"load":var selectors=$header.add($mainContent).add($footer);deleteAnim(selectors);if(loadOptions.inner&&loadOptions.inner=="true"){$mainContent.removeClass(bounceOU);animation=fadeI}$subC.add(selector).appendTo($util);if(jQuery.browser.msie){$mainContent.css("bottom",position+"px").css("top","60px");animation_ie($mainContent,"bounceIU");animation_ie($subC.add(selector),"fadeI")}else{$mainContent.css("bottom",position+"px").css("top","60px").addClass(An+bounceIU);$subC.add(selector).addClass(An+animation)}break}}var level=$("#content").attr("data-level"),loadOptions;if(!window.location.hash){switch(level){case"top":topLevel({step:"load",bones:"true",callback:deleteAnimT});break;case"sub_post":subLevel({step:"load",type:"post",callback:deleteAnimT});break;case"sub_page":subLevel({step:"load",type:"page",callback:deleteAnimT});break;case"none":subLevel({step:"load",type:"none",callback:deleteAnimT});break}}var siteUrl="http://"+self.location.host.toString(),url="";$(document).delegate("a[href^='"+siteUrl+"']:not(.fancybox):not([href^='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/'])","click",function(){location.hash=this.pathname;return false});$("#searchform").submit(function(e){location.hash="?s="+$("#s").val();e.preventDefault()});$('a[target="_blank"], header[role="banner"] a[target="_blank"]').live("click",function(){window.open($(this).attr("href"));return false});$('header[role="banner"] a.main-menu, #logo, .TopPrev .arrow, .TopPrev .desc, .TopNext .arrow, .TopNext .desc, #search_panel #results a.top_level, a.top-top, a.call-to-top').live("click",function(e){e.preventDefault();var link_h=$(this).attr("data-rel");var link=link_h+" #content";$("body").queue("load1",function(next){topLevel({step:"unload"});next()});$("body").delay(750,"load1");$("body").queue("load1",function(next){$content.load(link,function(){initVar();topLevel({step:"load",bones:"false",inner:"true",callback:deleteAnimT});init_scripts()});next()});$("body").dequeue("load1");if(!$.browser.msie){window.history.pushState("","",link_h)}return false});$(".SubPostAdj a, .SubPageAdj a").live("click",function(e){e.preventDefault();var link_h=$(this).attr("data-rel");link=link_h+" #content";level=$("#content").attr("data-level");if(level=="sub_post"){var type="post"}else{if(level=="sub_page"){var type="page"}}$("body").queue("load2",function(next){subLevel({step:"unload",type:type});next()});$("body").delay(750,"load2");$("body").queue("load2",function(next){$content.load(link,function(){initVar();subLevel({step:"load",type:type,inner:"true",callback:deleteAnimT});init_scripts()});next()});$("body").dequeue("load2");if(!$.browser.msie){window.history.pushState("","",link_h)}return false});$("a.SubClose").live("click",function(e){e.preventDefault();var link_h=$(this).attr("data-rel");var link=link_h+" #content";window.location.hash=this.hash;level=$("#content").attr("data-level");if(level=="sub_post"){var type="post"}else{if(level=="sub_page"){var type="page"}}$("body").queue("load3",function(next){subLevel({step:"unload",type:type,close:"true"});next()});$("body").delay(750,"load3");$("body").queue("load3",function(next){$content.load(link,function(){initVar();topLevel({step:"load",bones:"true",headerH:header_height,callback:deleteAnimT});init_scripts()});next()});$("body").dequeue("load3");if(!$.browser.msie){window.history.pushState("","",link_h)}return false});$(".archive-nav ul li a, #blog_categories li a").live("click",function(e){var $loopC=$(".loop_content");e.preventDefault();var link=$(this).attr("data-rel");close_sidebar();if(jQuery.browser.msie){animation_ie($loopC,"fadeOU")}else{$loopC.addClass(An+fadeOU)}console.log($loopC,link);$loopC.load(link+" .loop_content",function(){if($.browser.msie){animation_ie($loopC,"fadeI")}else{$loopC.removeClass(fadeOU).addClass(fadeID)}init_scripts()});if(!$.browser.msie){window.history.pushState("","",link)}return false});$("#blog_categories .blog-reset").live("click",function(e){e.preventDefault();$("#blog_categories").find(".active").removeClass("active");$("#blog_categories .blog-reset").addClass("active")});$("#blog_categories ul.dropdown-menu li a").live("click",function(e){e.preventDefault();$("#blog_categories").find(".active").removeClass("active");$(this).addClass("active");$(this).parent().parent().parent().find(".dropdown-toggle").addClass("active")});$("#comment-nav ul li a").live("click",function(e){var $comL=$("#comment-loop");$loading=$("#comments .loading");e.preventDefault();var link=$(this).attr("data-rel");$($comL).css("opacity","0.3");$loading.fadeIn(300);$($comL).delay(750).queue(function(nxt){$(this).load(link+" #comment-loop",function(){$loading.hide();$($comL).css("opacity","1");$($comL).fadeIn(300);comment_nav()})})});jQuery("a#responsiveMenuTrigger").live("click",function(e){e.preventDefault();jQuery.pageslide({href:"#responsiveMenu",endLoad:function(){cufon_refresh();jQuery("#pageslide a").on("click",function(e){e.stopPropagation();jQuery.pageslide.close();var link_h=$(this).attr("data-rel");link=link_h+" #content";var data_id=$(this).attr("data-id");$("ul.nav").find(".active").removeClass("active");$("ul.nav").find("a[data-id='"+data_id+"']").addClass("active");$("body").queue("load4",function(next){var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$contactB.add($searchB).add($searchB).add($contactB).removeClass("active");$contact.add($search).fadeOut(250);$header.transition({top:0,easing:"out"},750,function(){$header.removeClass("contact-open").removeClass("search-open").addClass("contact-closed").addClass("search-closed");$contact.add($search).fadeOut(250);$("#contactBox, #contactMap").css("display","none")});topLevel({step:"unload"});next()});$("body").delay(750,"load4");$("body").queue("load4",function(next){$content.load(link,function(){initVar();$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).show();topLevel({step:"load",bones:"false",inner:"true",callback:deleteAnimT});init_scripts()})});$("body").dequeue("load4");if(!$.browser.msie){window.history.pushState("","",link_h)}})}})});$("header[role='banner'].contact-closed #contact").live("click",function(e){e.preventDefault();close_sidebar();var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$(this).addClass("active");$searchB.removeClass("active");$header.removeClass("search-open").addClass("search-closed");$search.fadeOut(250);if(jQuery.browser.msie){animation_ie($footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA),"fadeODB")}else{$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).addClass(An+fadeODB)}$header.transition({top:window_height,delay:300,easing:"out"},750,function(){$header.removeClass("contact-closed").addClass("contact-open");$contact.css("display","block");$("#contactBox").css("display","block");$("#contactMap").css("display","block");$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).hide();var infoBubble=null,image=gmapPin;var initializeMap=function(){function setMarkers(map,markers){for(var i=0;i<markers.length;i++){var siteLocation=markers[i];var siteLatLng=new google.maps.LatLng(siteLocation["1"],siteLocation["2"]);var marker=new google.maps.Marker({position:siteLatLng,map:map,icon:image,title:siteLocation["0"],zIndex:siteLocation["3"],html:siteLocation["4"]});var contentString="Some content";google.maps.event.addListener(marker,"click",function(){infoBubble.open(map,this);infoBubble.setContent(this.html)})}}var centerMap=new google.maps.LatLng(gmapCenterLat,gmapCenterLon);var myOptions={zoom:gmapZoom,center:centerMap,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false,panControl:false,zoomControl:true,mapTypeControl:false,overviewMapControl:false,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"gnrocksMap"]}};var style_options=[{featureType:"all",elementType:"all",stylers:[{saturation:-100}]}];function convertNameToId(strId){reg=/:/g;return strId.replace(reg,"_")}var map=new google.maps.Map(document.getElementById(convertNameToId("contactMap")),myOptions);var mapType=new google.maps.StyledMapType(style_options,{name:"Grayscale"});map.mapTypes.set("gnrocksMap",mapType);map.setMapTypeId("gnrocksMap");setMarkers(map,sites);var center;function calculateCenter(){center=map.getCenter()}google.maps.event.addDomListener(map,"idle",function(){calculateCenter()});google.maps.event.addDomListener(window,"resize",function(){map.setCenter(center)});google.maps.event.addDomListener(window,"resize",function(){map.setCenter(center)});infoBubble=new InfoBubble({map:map,shadowStyle:1,padding:0,backgroundColor:"rgb(57,57,57)",borderRadius:4,arrowSize:10,borderWidth:1,borderColor:"#2c2c2c",disableAutoPan:true,hideCloseButton:true,arrowPosition:30,backgroundClassName:"phoney",arrowStyle:2});var bikeLayer=new google.maps.BicyclingLayer();bikeLayer.setMap(map)};initializeMap();panel_height(40)})});$("header[role='banner'].contact-open #contact, header[role='banner'].contact-open ul.nav li.menu-item a, header[role='banner'].contact-open #logo, header[role='banner'].contact-open ul.nav li a.home-link").live("click",function(e){e.preventDefault();var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$contactB.add($searchB).removeClass("active");$contact.fadeOut(250);$header.transition({top:0,easing:"out"},750,function(){$header.removeClass("contact-open").addClass("contact-closed");$contact.fadeOut(250);$("#contactBox, #contactMap").css("display","none");if(jQuery.browser.msie){$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).show();animation_ie($footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA),"fadeI")}else{$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).show().addClass(An+fadeI)}})});var window_height=$(window).height()-jQuery($header).height();jQuery(window).resize(function(){window_height=$(window).height()-jQuery($header).height()});$("header[role='banner'].search-closed #search").live("click",function(e){e.preventDefault();close_sidebar();var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$(this).addClass("active");$contactB.removeClass("active");$header.removeClass("contact-open").addClass("contact-closed");$contact.fadeOut(250);if(jQuery.browser.msie){animation_ie($footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA),"fadeODB")}else{$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).addClass(An+fadeODB)}$header.transition({top:window_height,delay:300,easing:"out"},750,function(){$header.removeClass("search-closed").addClass("search-open");$search.css("display","block");$("#hidden-search").focus();var result_height=$search.height()-$("#search-form-overlay").height()-40;$("#search_panel #results").css("height",result_height);$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).hide();panel_height(40);cufon_refresh()})});$("header[role='banner'].search-open #search, header[role='banner'].search-open ul.nav li.menu-item a.main-menu, header[role='banner'].search-open #logo, header[role='banner'].search-open ul.nav li a.home-link").live("click",function(e){e.preventDefault();var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$searchB.add($contactB).removeClass("active");$search.fadeOut(250);$header.transition({top:0,easing:"out"},750,function(){$header.removeClass("search-open").addClass("search-closed");if(jQuery.browser.msie){$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).show();animation_ie($footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA),"fadeI")}else{$footer.add($mainContent).add($topPrev).add($topNext).add($topSM).add($topSMA).show().addClass(An+fadeI)}})});$("#search_panel #results a").live("click",function(e){e.preventDefault();var level=$(this).attr("data-level");var type=$(this).attr("data-type");var selectors=$header.add($mainContent).add($footer).add($topPrev).add($topNext).add($topSM).add($topSMA);deleteAnim(selectors);$searchB.add($contactB).removeClass("active");$search.add($contact).fadeOut(250);if(level!="top"){$header.transition({y:header_height,easing:"out"},300,function(){$header.removeClass("search-open").addClass("search-closed");$header.hide();$header.css("top","0").transition({y:0})})}else{$header.transition({top:0,easing:"linear"},300,function(){$header.removeClass("search-open").addClass("search-closed");$footer.fadeIn(750)})}var link=$(this).attr("data-rel");link=link+" #content";$content.load(link,function(){initVar();switch(type){case"page":switch(level){case"top":$mainContent.show();topLevel({step:"load",bones:"false",callback:deleteAnimT});break;case"sub":$mainContent.show();subLevel({step:"load",type:"page",callback:deleteAnimT});break;case"none":$mainContent.show();subLevel({step:"load",type:"none",callback:deleteAnimT});break}break;case"post":$mainContent.show();subLevel({step:"load",type:"post"});break}init_scripts()})});$(window).bind("hashchange",function(){url_h=window.location.hash.substring(1);if(!url_h){return}url=url_h+" #content";if(!$.browser.msie){window.history.pushState("","",url_h)}var level=$("#content").attr("data-level");var data_type=$("#content").attr("data-type");var unload,type;if(data_type=="post"){var type="post"}else{var type="page"}if(level=="top"&&data_type=="post"){unload="top"}else{if(level=="sub_post"&&!(data_type)){unload="sub";type="post"}else{if(level=="none"&&data_type=="post"){unload="sub";type="post"}else{unload="top"}}}$("body").queue("load5",function(next){if(unload=="sub"){subLevel({step:"unload",type:type})}else{topLevel({step:"unload",bones:"false"})}next()});$("body").delay(750,"load5");$("body").queue("load5",function(next){$content.load(url,function(){initVar();subLevel({step:"load",type:type,callback:deleteAnimT});init_scripts()});next()});$("body").dequeue("load5");if(!$.browser.msie){window.history.pushState("","",url_h)}});$(window).trigger("hashchange")});jQuery(document).ready(function(){jQuery("#comment-fields, .info_log").hide();var author,email,url,comment,comment_parent,comment_post_ID,comment_action,dataString,btn;btn=jQuery("#comment-submit");btn_temp=jQuery("#comment-submit-temp");var loggedin=jQuery("#commentform #loggedin").val();if(loggedin=="false"){btn.hide();btn_temp.live("click",function(){jQuery("#comment-fields").show();btn_temp.hide();btn.show();return false})}jQuery("#comment-submit").live("click",function(){author=jQuery("#commentform #author").val();email=jQuery("#commentform #email").val();url=jQuery("#commentform #url").val();comment=jQuery("#commentform #comment").val();comment_parent="0";comment_post_ID=jQuery("#commentform #id").val();comment_action=jQuery("#commentform #comment_action").val();btn.button("loading");dataString="author="+author+"&comment="+comment+"&comment_parent="+comment_parent+"&comment_post_ID="+comment_post_ID+"&email="+email+"&url="+url;jQuery("#commentform").validate({submitHandler:function(data){jQuery.ajax({type:"POST",url:comment_action,data:dataString,success:function(data){var new_comment=jQuery(data).find("ol li:last");jQuery("ol").append(new_comment);jQuery(".info_log").html('<div class="alert alert-success fade in">Comment successfully added !</div>');jQuery("#comment").addClass("disabled");jQuery("#comment").attr("disabled","");btn.hide();jQuery(".comment-text .alert-message.success").hide(function(){jQuery(this).parent().css("cursor","help");jQuery(this).parent().attr("title","Your comment is awaiting moderation")})},error:function(request){var datacomment=request.responseText.match(/<p>(.*)<\/p>/);btn.button("reset");jQuery(".info_log").show().html('<div class="alert alert-error fade in"><a class="close" data-dismiss="alert">×</a>'+datacomment[1]+"</div>")},complete:function(){}})},debug:true,errorLabelContainer:jQuery(".hidden_error"),highlight:function(element,errorClass,errorLabelContainer){jQuery(element).parent().parent().addClass("error");jQuery(element).parent().parent().parent().addClass("error");btn.button("reset")},unhighlight:function(element,errorClass){jQuery(element).parent().parent().removeClass("error");jQuery(element).parent().parent().parent().removeClass("error")},rules:{email:{email:true,required:true},comment:{required:true},url:{required:false},author:{required:true}},messages:{email:"The email is required",comment:"The comment is required",author:"Your name is required"}})})});jQuery(document).ready(function(){var e=jQuery("#hidden-search"),c=jQuery("#display-search"),d=jQuery("#search_panel"),a=jQuery("#posts");jQuerypagesList=jQuery("#pages");jQueryportfoliosList=jQuery("#portfolios");d.live("click",function(f){e.focus();if(f.target.id=="search-overlay"){e.blur();jQuery(this).animate({opacity:0},0,function(){jQuery(this).slideUp({duration:300,easing:"easeOutBack"}).css("opacity",1)})}});jQuery("#search_panel #close").live("click",function(f){e.focus();e.blur();d.animate({opacity:0},10,function(){d.fadeOut(100).css("opacity",1)})});jQuery("#results a").live("click",function(){d.animate({opacity:0},10,function(){d.slideUp({duration:300,easing:"easeOutBack"}).css("opacity",1)})});e.keydown(function(f){currentQuery=c.val();if(f.keyCode==8){latestQuery=currentQuery.substring(0,currentQuery.length-1);c.val(latestQuery);b(latestQuery)}else{if(f.keyCode==32||(f.keyCode>=65&&f.keyCode<=90)||(f.keyCode>=48&&f.keyCode<=57)){latestQuery=currentQuery+String.fromCharCode(f.keyCode);c.val(latestQuery);b(latestQuery)}}});function b(f){if(f.length>0){jQuery.post(templateUrl+"/framework/auto-suggest.php",{latestQuery:f},function(l){if(l.length>0){l=jQuery.parseJSON(l);data_post=l["0"];data_page=l["1"];data_portfolio=l["2"];function k(r,o){var n="";if(o==null){o=""}for(var q in r){var p=r[q];if(typeof p=="string"){p="'"+p+"'"}else{if(typeof p=="object"){if(p instanceof Array){p="[ "+p+" ]"}else{var m=k(p,o+"  ");p="\n"+o+"{\n"+m+"\n"+o+"}"}}}n+=o+"'"+q+"' : "+p+",\n"}return n.replace(/,\njQuery/,"")}jQuery(".no-results").empty();jQuery("#results").show();a.html("");for(term in data_post){h=data_post[term];a.prepend('<li><a href="#" data-rel='+h+' title="'+term+'" data-type="post">'+term+"</a></li>")}jQuerypagesList.html("");for(term in data_page){var j,h,g,i;j=data_page[term];h=j[0];g=j[1];i=j[2];jQuerypagesList.prepend('<li><a href="'+h+'" data-rel='+g+' data-level="'+i+'" data-type="page" title="'+term+'">'+term+"</a></li>")}jQueryportfoliosList.html("");for(term in data_portfolio){h=data_portfolio[term];jQueryportfoliosList.prepend('<li><a href="#" data-rel='+h+' title="'+term+'" data-type="post">'+term+"</a></li>")}if(l==""){jQuery("#pages,#posts,#portfolios").html("");jQuery(".no-results").text("No results")}}})}else{jQuery("#results").hide()}}});