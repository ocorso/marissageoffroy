<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog-transition.html">
<link rel="import" href="../../bower_components/google-sheets/google-sheets.html">
<link rel="import" href="../mg-elements.html">

<polymer-element name="mg-portfolio" attributes="rows hash dialog" is="auto-binding">

<template>
  <google-sheets id="sheet" key="1vxK6BMZF1aTX9wnYKONv2ncK-124oW90wGW2ELaLoUM" published rows="{{rows}}"></google-sheets>
  <link rel="stylesheet" href="mg-portfolio.css">
  <div class="container">
  <template repeat="{{row in rows}}">
    <mg-card id="{{row.gsx$id.$t}}" filename="{{row.gsx$filename.$t}}" data-filename="{{row.gsx$filename.$t}}" data-heading="{{row.gsx$title.$t}}" on-click="{{onCardClick}}"></mg-card>
  </template>
  </div>
  <mg-detail id="dialog" heading="{{current.title}}" backdrop="true" transition="paper-dialog-transition-bottom"></mg-detail>
</template>
  <script>

    Polymer({
      isDetail: false,
      current:{
        title:"poopy"
      },
      ready:function(event){  
        console.log("mg-portfolio ready. isDetail? "+this.isDetail);
        this.$.sheet.addEventListener('google-sheet-data', function(e) {
            console.log("on-google-sheet-data");
            console.log(this.rows[0].gsx$filename.$t);
          });
          this.$.sheet.addEventListener('core-error', function(e) {
            console.error(e);
          });
       
       
      },
      onCardClick: function(event){ 
        console.log("Card Clicked: "+event.target.id);
        console.log(event.target.dataset);
        this.isDetail = true;
        this.$.dialog.updateDetail(event.target.dataset);
        this.$.dialog.toggle();
      }
    });
  </script>
</polymer-element>